{"mappings":"qhBAAAA,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,wJCAzDH,EAAA,S,MCAAI,EAAiB,IAAAC,IAAoBL,EAAA,SAAAM,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,8BCK5F,MAAMC,EAAO,CACXC,wBAAyBC,SAASC,cAAc,4BAChDC,qBAAsBF,SAASC,cAAc,2BAC7CE,aAAcH,SAASC,cAAc,qBACrCG,aAAcJ,SAASC,cAAc,4BAMvC,IAAII,EAAa,GACbC,EAAe,GAGnBR,EAAKM,aAAaG,iBAAiB,SAyBnC,SAAkBC,GAChB,GAA8B,WAA1BA,EAAMC,OAAOC,SACf,OAEiBF,EAAMC,OAAOE,QAAQC,E,IAzB1CC,iBACE,MAAMC,GAAiB,EAAAC,EAAAC,MAVH,aAYpB,IAAKF,GAA4C,IAA1BA,EAAeG,OAAc,CAClD,MAAMC,GAAU,EAAAC,EAAAC,4BAChBtB,EAAKK,aAAakB,UAAYH,C,CAGhC,KAiDF,SAAuBI,GACrB,MAAMC,EAAWD,EACdE,KACC,EAAGC,OAAOC,IAAEA,EAAGC,MAAEA,EAAKC,SAAEA,EAAQC,YAAEA,EAAWC,QAAEA,EAAOC,OAAEA,OACtD1B,EAAW2B,KAAKJ,GAChBtB,EAAa0B,KAAK,CAAEC,MAAO,CAACL,GAAWhB,GAAI,CAACc,KACrC,8CAA8CA,qBAAuBE,sGAA6GE,sQAI5KI,EAAA3C,oLAMgCoC,gEACEE,yNAGmBE,mNAG7BG,EAAA3C,0NAIA2C,EAAA3C,0NAIA2C,EAAA3C,0NAIA2C,EAAA3C,2MAIA2C,EAAA3C,8MAKQmC,8JAOhDS,KAAK,IACRrC,EAAKI,qBAAqBmB,UAAYE,C,CAnGpCa,OAqBJvB,eAA0BwB,GACxB,MAAMC,EACJ,0DACF,IACE,MAAMC,EAAgBF,EAAMb,KAAIX,MAAM2B,UACbC,MAAM,GAAGH,IAAmBE,MACnCE,SAGlB,aADsBC,QAAQC,WAAWL,E,CAEzC,MACA,MAAM,IAAIM,MAAM,Q,EAjCUC,CAAWhC,KAqCzC,SAAyBQ,GACvB,MAAMyB,EAAezB,EAAIE,KACvBwB,GAAU,4FAC8CA,8BAG1DlD,EAAKC,wBAAwBsB,UAAY,mJAE5B0B,EAAaZ,KAAK,K,CAxC7Bc,CAHuB5C,EACpB6C,QAAO,CAACC,EAAQC,EAAOC,IAAUA,EAAMC,QAAQH,KAAYC,IAC3DG,MAAK,CAACC,EAAGC,IAAMD,EAAEE,cAAcD,MAEbzD,SAAS2D,iBAAiB,a,CAC/C,MAAOC,GACPC,QAAQC,IAAIF,EAAMG,Q,EAnBtBC,GAkHAH,QAAQC,IAAIxD,G","sources":["node_modules/@parcel/runtime-js/lib/runtime-15cd39e06defd570.js","src/favorite-page.js","node_modules/@parcel/runtime-js/lib/runtime-643dfc921be0cb37.js","src/js/favorites.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"bTGq4\\\":\\\"favorites-page.fa411d29.js\\\",\\\"lp5u4\\\":\\\"sprite.f129be79.svg\\\",\\\"b3ZSW\\\":\\\"index.a3296b03.js\\\"}\"));","import './js/header';\nimport './js/favorites-hero';\nimport './js/favorites';\nimport './js/create_order';\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"lp5u4\")).toString();","import axios from 'axios';\nimport svg from '../images/sprite.svg';\nimport { createPlugFavoriteMarkup } from './plug';\nimport { save, load, remove } from './localStorageJSON';\n\nconst refs = {\n  favoritesCategoriesList: document.querySelector('.favorites-category-list'),\n  favoritesRecipesList: document.querySelector('.favorites-recipes-list'),\n  emptyStorage: document.querySelector('.empty-storage-js'),\n  listRecipeEl: document.querySelector('.favorites-recipes-list'),\n\n  //paginationBox: document.getElementById('pagination'),\n  //allBtn: document.querySelector('.all-btn'),\n};\nconst KEY_FAVOURITE = 'favourite';\nlet favArrList = [];\nlet favCatArrObj = [];\nlet favSortArr = [];\n\nrefs.listRecipeEl.addEventListener('click', selectId);\n\ncheckArrFavoritesId();\n\nasync function checkArrFavoritesId() {\n  const arrFavoritesId = load(KEY_FAVOURITE);\n\n  if (!arrFavoritesId || arrFavoritesId.length === 0) {\n    const markStr = createPlugFavoriteMarkup();\n    refs.emptyStorage.innerHTML = markStr;\n  }\n\n  try {\n    const recipesList = await fetchUsers(arrFavoritesId);\n    MarkUpRecipes(recipesList);\n    const favoritListArr = favArrList\n      .filter((course, index, array) => array.indexOf(course) === index)\n      .sort((a, b) => a.localeCompare(b));\n    MarkUpFavSearch(favoritListArr);\n    const seeRecipeBtn = document.querySelectorAll('.js-recipe');\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nfunction selectId(event) {\n  if (event.target.nodeName !== 'BUTTON') {\n    return;\n  }\n  const selectedId = event.target.dataset.id;\n  seeRecipe(selectedId);\n}\n\nfunction seeRecipe(id) {}\n\nasync function fetchUsers(arrId) {\n  const BASE_URL_RECIPES =\n    'https://tasty-treats-backend.p.goit.global/api/recipes/';\n  try {\n    const arrOfPromises = arrId.map(async itemId => {\n      const response = await fetch(`${BASE_URL_RECIPES}${itemId}`);\n      return response.json();\n    });\n    const recipes = await Promise.allSettled(arrOfPromises);\n    return recipes;\n  } catch {\n    throw new Error('ERROR');\n  }\n}\n\nfunction MarkUpFavSearch(arr) {\n  const favSearchArr = arr.map(\n    search => ` <li class=\"fav-search-item\">\n          <button type=\"button\" class=\"fav-search-button\">${search}</button>\n        </li>`\n  );\n  refs.favoritesCategoriesList.innerHTML = `<li class=\"fav-search-item\">\n          <button type=\"button\" class=\"fav-search-button all-category-btn\">All  categories</button>\n        </li>${favSearchArr.join('')}`;\n}\n\nfunction MarkUpRecipes(arr) {\n  const favorArr = arr\n    .map(\n      ({ value: { _id, title, category, description, preview, rating } }) => {\n        favArrList.push(category);\n        favCatArrObj.push({ categ: [category], id: [_id] });\n        return `<li class=\" dishes-list-item-fav\" data-id=\"${_id}\" data-category=\"${category}\" style=\"background: linear-gradient(1deg, rgba(5, 5, 5, 0.60) 0%, rgba(5, 5, 5, 0.00) 100%), url(${preview}); background-position: center;\n                      background-size: cover;\">\n        <button type=\"button\" aria-label=\"Favorite Button\" class=\"heart-btn js-favourite\" data-heart=\"heart\">\n        <svg class=\"dishes-list-heart-icon\">\n        <use href=\"${svg}#icon-heart\">\n        </use>\n    </svg>\n</button>\n            \n            <div class=\"dishes-list-item-wrapper-fav\">\n                <h3 class=\"dishes-list-item-title\">${title}</h3>\n                <p class=\"dishes-list-item-text-fav\">${description}</p>\n                <div class=\"dishes-list-item-wrapper-rating\">\n                    <div class=\"dishes-list-item-wrapper-rating-star\">\n                        <p class=\"dishes-list-item-wrapper-rating-text\">${rating}</p>\n                        <div class=\"dishes-list-item-wrapper-rating-star-5\">\n                            <svg class=\"dishes-list-star-icon is-active-star\">\n                                <use href=\"${svg}#icon-star\">\n                                </use>\n                            </svg>\n                            <svg class=\"dishes-list-star-icon is-active-star\">\n                                <use href=\"${svg}#icon-star\">\n                                </use>\n                            </svg>\n                            <svg class=\"dishes-list-star-icon is-active-star\">\n                                <use href=\"${svg}#icon-star\">\n                                </use>\n                            </svg>\n                            <svg class=\"dishes-list-star-icon is-active-star\">\n                                <use href=\"${svg}#icon-star\">\n                                </use>\n                            </svg>\n                            <svg class=\"dishes-list-star-icon\">\n                                <use href=\"${svg}#icon-star\">\n                                </use>\n                            </svg>\n                        </div>\n                    </div>\n                    <button type=\"button\" data-id=\"${_id}\" data-recipe-btn=\"click\" class=\"see-recipe-btn js-see-recipe js-recipe\">See recipe</button>\n                </div>\n            </div>\n        </li>`;\n      }\n    )\n\n    .join('');\n  refs.favoritesRecipesList.innerHTML = favorArr;\n}\n\nconsole.log(favCatArrObj);\n\n// function filterFavoriteCard() {\n//   const cardsLisCategory = document.querySelectorAll('.fav-search-button');\n\n//   cardsLisCategory.forEach(button => {\n//     button.addEventListener('click', event => {\n//       const selectedCategory = event.target.textContent;\n//       save('category', selectedCategory);\n//       save('page', 1);\n\n//       favSortArr = [];\n\n//       favCatArrObj.forEach(obj => {\n//         if (obj.categ[0] === selectedCategory) {\n//           favSortArr.push(...obj.id);\n//         }\n//       });\n\n//       rend();\n//       pagination.reset(favSortArr.length);\n//     });\n//   });\n// }\n\n// function rend() {\n//   const recipesList = favSortArr.map(recipeId => {\n//     return recipes.find(recipe => recipe._id === recipeId);\n//   });\n\n//   MarkUpRecipes(recipesList);\n// }\n// filterFavoriteCard()\n"],"names":["parcelRequire","register","JSON","parse","$a4212a039eccdb43$exports","URL","resolve","import","meta","url","toString","$7f07f86ee49d81c7$var$refs","favoritesCategoriesList","document","querySelector","favoritesRecipesList","emptyStorage","listRecipeEl","$7f07f86ee49d81c7$var$favArrList","$7f07f86ee49d81c7$var$favCatArrObj","addEventListener","event","target","nodeName","dataset","id","async","arrFavoritesId","$iELe5","load","length","markStr","$ey8Ff","createPlugFavoriteMarkup","innerHTML","arr","favorArr","map","value","_id","title","category","description","preview","rating","push","categ","$parcel$interopDefault","join","$7f07f86ee49d81c7$var$MarkUpRecipes","arrId","BASE_URL_RECIPES","arrOfPromises","itemId","fetch","json","Promise","allSettled","Error","$7f07f86ee49d81c7$var$fetchUsers","favSearchArr","search","$7f07f86ee49d81c7$var$MarkUpFavSearch","filter","course","index","array","indexOf","sort","a","b","localeCompare","querySelectorAll","error","console","log","message","$7f07f86ee49d81c7$var$checkArrFavoritesId"],"version":3,"file":"favorites-page.fa411d29.js.map"}