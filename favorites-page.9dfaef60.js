!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){a[e]=t},t.parcelRequired7c6=i),i("iE7OH").register(JSON.parse('{"1Z6Xn":"favorites-page.9dfaef60.js","ee16w":"sprite.f129be79.svg","1XaNB":"favorites-page.5bb02363.css","1sXBe":"index.e71fe276.js"}')),i("i8Q71");var r,o=i("bpxeT"),s=i("2TvXO"),c=i("lfVVO");r=i("aNJCr").getBundleURL("1Z6Xn")+i("iE7OH").resolve("ee16w");var l=i("5TBXW"),u=(o=i("bpxeT"),s=i("2TvXO"),i("bHHEi")),d=i("6JpON"),p=function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message),d.Notify.failure("Something went wrong. Please try again")}},f=(c=i("lfVVO"),l=i("5TBXW"),i("98X1s")),v=i("1VFfL"),g=document.getElementById("tui-pagination-container"),h=p("favourite"),m=0;h&&(m=h.length);var b={totalItems:m,itemsPerPage:window.innerWidth<768?9:12,visiblePages:window.innerWidth<768?2:3,page:1,centerAlign:!0,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}},w=new(e(v))(g,b);w.on("afterMove",(function(e){k(e.page,!0),window.scrollTo({top:0,left:0,behavior:"smooth"})}));var y={favoritesCategoriesList:document.querySelector(".favorites-category-list"),favoritesRecipesList:document.querySelector(".favorites-recipes-list"),emptyStorage:document.querySelector(".empty-storage-js"),paginationConteiner:document.getElementById("tui-pagination-container")},x=new(0,c.TastyAPI),C="favourite",S=[];function k(){return E.apply(this,arguments)}function E(){return E=e(o)(e(s).mark((function t(){var n,a,i,r,o,c,d=arguments;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.length>0&&void 0!==d[0]?d[0]:1,a=d.length>1&&void 0!==d[1]&&d[1],i=p(C),r=window.innerWidth<768?9:12,(o=i.map((function(e){return e.id})))&&0!==o.length){e.next=8;break}c=(0,u.createPlugFavoriteMarkup)(),y.emptyStorage.innerHTML=c,e.next=27;break;case 8:return e.prev=8,e.next=11,O(o);case 11:S=e.sent,w.setTotalItems(S.length),T(L(i)),A(S.slice(r*(n-1),r*n)),I(),document.querySelectorAll(".see-recipe-btn").forEach((function(e){e.addEventListener("click",M)})),(0,l.openCloseModal)(),N(),a||w.reset(S.length),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(8),console.log(e.t0.message);case 27:case"end":return e.stop()}}),t,null,[[8,24]])}))),E.apply(this,arguments)}function L(e){var t=[];return e.forEach((function(e){return t.push(e.category)})),t.filter((function(e,t,n){return n.indexOf(e)===t})).sort((function(e,t){return e.localeCompare(t)}))}function O(e){return R.apply(this,arguments)}function R(){return R=e(o)(e(s).mark((function t(n){var a,i;return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=n.map(function(){var t=e(o)(e(s).mark((function t(n){var a;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x.getRecipeById(n),e.abrupt("return",a);case 2:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=4,Promise.allSettled(a);case 4:return i=t.sent,t.abrupt("return",i.map((function(e){return e.value})));case 8:throw t.prev=8,t.t0=t.catch(0),new Error("ERROR");case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),R.apply(this,arguments)}function T(e){var t=e.map((function(e){return' <li class="fav-search-item">\n          <button type="button" class="fav-search-button ">'.concat(e,"</button>\n        </li>")}));y.favoritesCategoriesList.innerHTML='<li class="fav-search-item">\n          <button type="button" class="fav-search-button all-category-btn active-button">All categories</button>\n        </li>'.concat(t.join(""))}function A(t){y.favoritesRecipesList.innerHTML="";var n=t.map((function(t){var n=t._id,a=t.title,i=t.category,o=t.description,s=t.preview,c=t.rating,l='<svg class="is-active-star">\n      <use href="'.concat(e(r),'#icon-star"></use>\n    </svg>'),u='<svg class="dishes-list-star-icon">\n      <use href="'.concat(e(r),'#icon-star"></use>\n    </svg>');var d,p;return'<li class="dishes-list-item" data-id="'.concat(n,'" data-category="').concat(i,'" style="background: linear-gradient(1deg, rgba(5, 5, 5, 0.60) 0%, rgba(5, 5, 5, 0.00) 100%), url(').concat(s,'); background-position: center;\n                      background-size: cover;" loading="lazy">\n         ').concat((d=n,p=i,'\n    <div class="heart-wraper" id="'.concat(d,'">\n      <input type="checkbox" class="heart-checkbox" id="').concat(d,'" data-category="').concat(p,'" />\n      <label for="').concat(d,'" class="heart-checkbox-label">\n        <span class="heartOff">').concat('<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">\n  <path opacity="0.5" fill-rule="evenodd" clip-rule="evenodd" d="M10.9938 4.70783C9.16102 2.5652 6.10481 1.98884 3.80851 3.95085C1.51221 5.91285 1.18893 9.19323 2.99222 11.5137C4.49154 13.443 9.029 17.5121 10.5161 18.8291C10.6825 18.9764 10.7657 19.0501 10.8627 19.0791C10.9474 19.1043 11.0401 19.1043 11.1248 19.0791C11.2218 19.0501 11.305 18.9764 11.4714 18.8291C12.9585 17.5121 17.496 13.443 18.9953 11.5137C20.7986 9.19323 20.5148 5.89221 18.179 3.95085C15.8432 2.00948 12.8265 2.5652 10.9938 4.70783Z" stroke="#F8F8F8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>','</span>\n        <span class="heartOn">').concat('<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.9937 4.70783C9.16096 2.5652 6.10475 1.98884 3.80845 3.95085C1.51215 5.91285 1.18887 9.19323 2.99216 11.5137C4.49148 13.443 9.02894 17.5121 10.5161 18.8291C10.6825 18.9764 10.7656 19.0501 10.8627 19.0791C10.9474 19.1043 11.04 19.1043 11.1247 19.0791C11.2218 19.0501 11.305 18.9764 11.4713 18.8291C12.9585 17.5121 17.4959 13.443 18.9952 11.5137C20.7985 9.19323 20.5147 5.89221 18.179 3.95085C15.8432 2.00948 12.8264 2.5652 10.9937 4.70783Z" fill="#F8F8F8"/>\n</svg>',"</span>\n      </label>\n    </div>")),'\n            \n            <div class="dishes-list-item-wrapper-fav">\n                <h3 class="dishes-list-item-title">').concat(a,'</h3>\n                <p class="dishes-list-item-text-fav">').concat(o,'</p>\n                <div class="dishes-list-item-wrapper-rating">\n                    <div class="dishes-list-item-wrapper-rating-star">\n                        <p class="dishes-list-item-wrapper-rating-text">').concat(c.toFixed(1),'</p>\n                        <div class="dishes-list-item-wrapper-rating-star-5">\n                            ').concat(function(e){for(var t="",n=Math.round(e),a=0;a<5;a++)t+=a<n?l:u;return t}(c),'\n                        </div>\n                    </div>\n                    <button type="button" data-id="').concat(n,'" data-open=\'recipe\' data-recipe-btn="click" class="see-recipe-btn js-see-recipe js-recipe">See recipe</button>\n                </div>\n            </div>\n        </li>')}));y.favoritesRecipesList.innerHTML=n.join("")}function I(){document.querySelectorAll(".heart-checkbox").forEach((function(e){e.addEventListener("click",H),e.checked=!0}))}function H(e){var t=p(C),n=e.target.id,a=t.findIndex((function(e){return e.id==n}));t.splice(a,1),localStorage.setItem(C,JSON.stringify(t)),k()}function M(e){var t=e.target.dataset.id;j(t),(0,f.modalRating)(t)}function q(){var e=localStorage.getItem("favourite");if(e){var t=JSON.parse(e),n=document.querySelector(".favorite-btn"),a=n.dataset.id;t.forEach((function(e){a===e.id&&(n.textContent="Remove to favorite")}))}}function B(){var e=p(C),t=document.querySelector(".favorite-btn"),n=t.dataset,a=document.querySelectorAll(".heart-checkbox");if("Remove to favorite"===t.textContent){t.textContent="Add to favorite",a.forEach((function(e){e.getAttribute("id")===n.id&&(e.checked=!1)})),e.map((function(t,a){n.id===t.id&&e.splice(a,1)}));var i=JSON.stringify(e);localStorage.setItem("favourite",i)}else{if(a.forEach((function(e){e.getAttribute("id")===n.id&&(e.checked=!0)})),t.textContent="Remove to favorite",e.includes(n))return;e.push(n);var r=JSON.stringify(e);localStorage.setItem("favourite",r)}k()}y.favoritesCategoriesList.addEventListener("click",(function(e){var t=e.target.textContent;if("All categories"===t)k();else{var n=S.filter((function(e){return e.category===t}));A(n),I(),document.querySelectorAll(".see-recipe-btn").forEach((function(e){e.addEventListener("click",M)})),(0,l.openCloseModal)(),N(),w.reset(n.length)}document.querySelectorAll(".fav-search-button").forEach((function(e){e.classList.remove("active-button")})),e.target.classList.add("active-button")})),k();var F=document.querySelector(".scroll-btn-show");function N(){return window.innerWidth<=768?(w.setItemsPerPage(9),9):(w.setItemsPerPage(12),12)}window.onload=function(){window.onscroll=function(e){var t=window.scrollY;t>300&&(progressBar(),scrollAnimation(),t=null)},window.onscroll=function(){window.scrollY>500?F.classList.remove("scroll-top-hide"):window.scrollY<500&&F.classList.add("scroll-top-hide")},F.addEventListener("mousedown",(function(e){window.scrollTo({top:0,left:0,behavior:"smooth"})}))};d=i("6JpON");var _={markupRecipe:document.querySelector(".recipe-markup"),videoRecipe:document.querySelector(".recipe-video")},P=new(0,c.TastyAPI);function j(e){return X.apply(this,arguments)}function X(){return(X=e(o)(e(s).mark((function t(n){return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.getRecipeById(n).then((function(e){_.markupRecipe.innerHTML=J(e),(0,l.openCloseModal)();var t=document.querySelector(".favorite-btn");q(),t.addEventListener("click",B)})).catch((function(t){e(d).Notify.failure(t.message)}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function J(t){var n=t._id,a=t.title,i=t.category,o=t.instructions,s=t.time,c=t.youtube,l=t.tags,u=t.ingredients,d=t.rating,p='<svg class="star-active">\n      <use href="'.concat(e(r),'#icon-star"></use>\n    </svg>'),f='<svg class="star-notActive">\n      <use href="'.concat(e(r),'#icon-star"></use>\n    </svg>');var v=u.map((function(e){var t=e.name,n=e.measure;return'\n    <li class="ingredients-item">\n      <span class="ingredients-item-name">'.concat(t,'</span>\n      <span class="ingredients-item-measure">').concat(n,"</span>\n    </li>\n    ")})).join(" "),g=l.map((function(e){return'\n    <li class="tags-item">#'.concat(e,"</li>\n    ")})).join(" ");return'\n <div class="recipe-main-info">\n    <iframe\n    class="recipe-video"\n    width="100%" height="100%" src="https://www.youtube.com/embed/'.concat(c.slice(c.lastIndexOf("=")+1),'?enablejsapi=1" title="YouTube video player" \n    frameborder="0" allow="accelerometer; autoplay;\n     clipboard-write; encrypted-media; gyroscope; picture-in-picture;\n      web-share" allowfullscreen id=\'v1\'>\n     </iframe> \n\n     <h2 class="recipe-title">').concat(a,'</h2>\n </div>\n\n<div class="recipe-details-info">\n    <div class="recipe-rating-time">\n      <div  class="rating">').concat(d.toFixed(1),'\n     <div class="test-tumb">').concat(function(e){for(var t="",n=Math.round(e),a=0;a<5;a++)t+=a<n?p:f;return t}(d),'</div>\n          </div>\n      <p class="time-cooking">').concat(s,'min</p>\n    </div>\n\n    <div class="recipe-ingredients-tags">\n        <ul class="recipe-ingredients">').concat(v,'</ul>\n        <ul class="recipe-tags">').concat(g,'</ul>\n    </div>\n  </div>\n\n  <p class="recipe-text">').concat(o,'</p>\n  \n   <div class="modal-btn">\n    <button type="button" class="favorite-btn btn" data-id="').concat(n,'" data-category="').concat(i,'">Add to favorite</button>\n    <button type="button" class="rating-btn btn" data-open="rating">Give a rating</button>\n   </div>\n    ')}i("4m3QF"),i("5TBXW"),i("98X1s")}();
//# sourceMappingURL=favorites-page.9dfaef60.js.map
